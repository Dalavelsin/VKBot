## VKBot 

Данное приложение является ботом для социальной сети ВКонтакте и предназначено для ответа на сообщения (на данном этапе)

Приложение написано на языке python версии 2.7 с использованием фреймворка [Kivy](https://kivy.org) и является мультиплатформенным.
Предполагается использование на OC android, но работа возможна и на других платформах.

<img height="600" src="https://github.com/Fogapod/ChatBot_UI/blob/master/data/images/screenshots/login_screen.png" 
align="left"/>
<img height="600" src="https://github.com/Fogapod/ChatBot_UI/blob/master/data/images/screenshots/main_screen.png" 
align="center"/>

## Использованы библиотеки и модули:
* [vk](https://github.com/dimka665/vk)
* [kivy-toaster](https://github.com/knappador/kivy-toaster)
***
## Руководство к использованию

> Руководство написано для версии [0.0.9](https://github.com/Fogapod/VKBot/releases/tag/0.0.9) и может не соответствовать функционалу других версий

### Начало работы
Для начала необходимо войти в аккаунт (на данный момент существует поддержка двухфакторной авторизации, капча не поддерживается)  
Приложение имеет открытый исходный код. Сохранность данных авторизации гарантирована.

<img height="140" src="https://github.com/Fogapod/VKBot/blob/master/data/images/screenshots/options_dropdown.png" align="right"/>

После входа будет открыт главный экран приложения. Рекомендуется сразу перейти в настройки и установить обращение(я) к боту. Обращения разделяются двоеточием `:`  
После этого можно запускать бота (если он уже запущен, необходимо остановить его и запустить снова для применения новых настроек и пользовательских команд)

> Бот запущен только в том случае, если под кнопкой запуска появился счётчик ответов. Если запуск длится дольше 5 секунд, то, скорее всего, возникла ошибка

<img height="100" src="https://github.com/Fogapod/VKBot/blob/master/data/images/screenshots/main_button.png"/>

Если бот не активирован, он будет добавлять сообщение об этом в конце каждого сообщения. Для активации необходимо обратиться к [автору](https://vk.com/fogapod). Активация бота бесплатна, как и само приложение.

После запуска и активации следует ознакомиться с разделом help. Для этого нужно выполнить команду `/help` (`/` является одним из стандартных обащений к боту. Оно может быть любым, я использую его для удобства)
<img height="400" src="https://github.com/Fogapod/VKBot/blob/master/data/images/screenshots/help_command.png"/>

### Пользовательские команды
Бот поддерживает создание и использование своих команд. Их можно добавлять двумя способами. Через интерфейс и сообщения.

> Для работы пользовательских команд необхоимо включить их поддержку через настройки приложения.
Регистр команды не учитывается.

##### Интерфейс
<img height="300" src="https://github.com/Fogapod/VKBot/blob/master/data/images/screenshots/command_edit_popup.png"/>

Для работы с пользовательскими командами в интерефейсе необходимо перейти на экран их настройки из главного экрана приложения. Изначально никаких команд нет. Это можно исправить, добавив несколько.
Каждая команда содержит 5 опций, переключаемых кнопками ниже поля `ответ`

> Каждая из опций может находиться в двух (0, 2) или трёх (0, 1, 2) состояниях. 0 - красный цевт, 1 - синий, 2 - зелёный.

* r - использовать для определения команды синтаксис регулярных выражений (нет, да)
* !' - убрать кавычку в конце ответа (обычное поведение, никогда не убирать, убирать всегда)
* f - пересылать сообщения (обычное поведение, никогда не пересылать, пересылать всегда)
* / - отвечать на команду только при (в любом случае, только без обращения, только при обращении (`бот, команда`))
* откл - отключить команду (нет, да)

> Язык регулярных выражений - поиск совпадений в тексте по определённым правилам. Документация по регулярным выражениям: <https://docs.python.org/2/library/re.html>
Проверка своих регулярных выражений: <http://pythex.org>
Бот поддерживает группы регулярного выражения. Для вставки части полученного сообщения в ответе необходимо указать `{имя_группы}` или же использовать совпадения и вставлять их в ответ через `{}`. Количество возвращаемых групп не ограничено.

##### Сообщения
<img height="300" src="https://github.com/Fogapod/VKBot/blob/master/data/images/screenshots/learn-forgot_commands.png"/>

Пользовательские команды можно настраивать через сообщения. 
Для добавления команды или ответа для существующей команды используется команда `/learn команда::Ответ::опции`

> Опции представляют из себя последовательность из 5 цифр. Каждая из них соответствует опции из интерфейса и принимает соответствующие значения (0, 2) или (0, 1, 2). Стандартное значение опций - `00000`

Удаление всей команды производится командой `/forgot команда`. Удаление ответа производится через `/forgot команда::Ответ`

> Пользовательские команды поддерживают вложения. Для их отправки в ответе необходимо указать `attach=https://vk.com/photo12345_6789` или `attach=photo12345_6789` 
Указывать подобным образом можно только на свои вложения из вк. Так же можно указать ссылку на альбом. В этом случае будет выбрана случайная фотография из альбома.
