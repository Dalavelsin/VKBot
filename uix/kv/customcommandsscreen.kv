#: import Widget uix.widgets
#: import BlueButton uix.widgets
#: import FontelloButton uix.widgets


<ListButton>:
    text_size: self.width, None
    halign: 'center'
    size_hint_y: None


<Command>:
    background_color: .25, .7, .7, 1
    dropdown: None
    edit_popup: None

    command_text: ''
    responses: []
    command_list: []
    index_in_list: None

    text: root.preview(self.command_text)


<Response>:
    background_color: .3, .3, .3, 1

    response_text: ''

    text: root.preview(self.response_text)


<CustomCommandsScreen>:
    name: 'cc_screen'
    command_list: command_list

    BoxLayout:
        orientation: 'vertical'
        padding: dp(10)
        spacing: dp(5)

        BoxLayout:
            padding: dp(4)

            canvas.before:
                Color:
                    rgb: 0, 0, 0

                Rectangle:
                    pos: self.pos
                    size: self.size

                Color:
                    rgb: .46, .46, .46

                Rectangle:
                    pos:
                        self.pos[0] + self.padding[0] / 2, self.pos[1] + self.padding[1] / 2

                    size:
                        self.size[0] - self.padding[0], self.size[1] - self.padding[1]

            RecycleView:
                id: command_list
                viewclass: 'Command'

                RecycleBoxLayout:
                    orientation: 'vertical'
                    default_size_hint: 1, None
                    size_hint_y: None
                    height: self.minimum_height
                    spacing: dp(2)

                    # required for accessing screen's properties from commands
                    root: root

        BoxLayout:
            spacing: dp(7)
            size_hint_y: None
            height: self.minimum_height

            FontelloButton:
                text: 'P'
                size_hint: 1.5, None
                background_color: 0, 0, 0, 0
                height: self.texture_size[1] * 2

                on_release: root.edit_popup.open_empty()

            Widget

            FontelloButton:
                id: button_left
                text: 'L'
                size_hint_x: None
                width: self.texture_size[0] * 2
                on_release: root.prev_page()

            Label:
                id: page_label
                font_size: sp(15)
                size_hint_x: None
                width: self.texture_size[0]

            FontelloButton:
                id: button_right
                text: 'R'
                size_hint_x: None
                width: self.texture_size[0] * 2
                on_release: root.next_page()

            Widget

            FontelloButton:
                text: 'U'
                size_hint: 1.5, None
                background_color: 0, 0, 0, 0
                height: self.texture_size[1] * 2

                on_release: root.sort()
